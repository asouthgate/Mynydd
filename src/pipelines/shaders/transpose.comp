#version 450

layout(local_size_x = 256) in;

layout(set = 0, binding = 0) readonly buffer InputBuffer {
    uint inputData[];
};

layout(set = 0, binding = 1) writeonly buffer OutputBuffer {
    uint outputData[];
};

layout(set = 0, binding = 2) uniform Params {
    uint rows;
    uint cols;
} params;

void main() {
    uint idx = gl_GlobalInvocationID.x;

    if (idx < params.rows * params.cols) {
        uint row = idx / params.cols;
        uint col = idx % params.cols;
        uint out_idx = col * params.rows + row; // transpose
        outputData[out_idx] = inputData[idx];
    }
}